## v0.2

Release date: 2025-06-28

### Highlights
- Clean, verified featured playlists via TMDB-backed generator
- Full admin playlist management (create, edit, delete, add/remove movies)
- Horizontal “Trending” and “Popular” discovery rows with glass scroll control
- Reliable Sign Out, and clearer “Watch Trailer” CTAs (no “Watch Now” ambiguity)

### New
- Playlists generator script to produce accurate seed data and a migration
  - `scripts/build_featured_playlists.cjs`
  - NPM script: `npm run generate:playlists`
  - Accepts TMDB v4 bearer or v3 API key from `.env`/`.env.local` or env vars: `TMDB_BEARER`, `VITE_TMDB_API_KEY`, `TMDB_API_KEY`, `TMDB_V3_API_KEY`.
  - Outputs a timestamped SQL migration under `supabase/migrations/` that deletes bad featured playlists and inserts correct ones (IDs, titles, poster/backdrop paths, ratings, years, order).

- Admin playlist editing page and route
  - `src/pages/EditPlaylistPage.tsx`
  - Route wired: `/playlist/:id/edit` in `src/App.tsx`
  - Supports: title, description, cover image, featured/public toggles; delete action

- Horizontal discovery rows (Netflix/Disney+ style)
  - `src/components/MovieRow.tsx` with glassmorphism right scroll button and hidden scrollbar
  - Home uses rows for “Trending This Week” and “Popular Now” instead of duplicate grids

### Changes
- “Watch Now” → “Watch Trailer” in `src/components/HeroCarousel.tsx`
- Home page:
  - Introduced `MovieRow` rows; removed redundant Popular/Trending duplication
  - Kept hero carousel and featured playlists

### Fixes
- Add Movies page runtime hook error (React #310) fixed by moving guard after hooks
  - `src/pages/AddMoviesToPlaylistPage.tsx`
- RLS 42501 error when adding to featured playlists
  - New admin policies allow the admin (by email) to manage featured playlists and their movies
  - Migration: `supabase/migrations/20250628101500_admin_featured_playlists_policies.sql`
  - Note: Update the email in the migration if your admin differs from `shaansisodia3@gmail.com`.
- Reliable sign out
  - `src/hooks/useAuth.ts` now calls `supabase.auth.signOut({ scope: 'local' })` and clears local state immediately

### Migrations
- Apply the new admin RLS policy migration in your Supabase project:
  - `supabase/migrations/20250628101500_admin_featured_playlists_policies.sql`

- To generate fresh featured playlists seed with correct TMDB data:
  1) Provide TMDB credentials (any one works):
     - `.env` or `.env.local` at project root:
       - `TMDB_BEARER=<your_v4_bearer_token>`
       - or `VITE_TMDB_API_KEY=<your_key>`
       - or `TMDB_API_KEY=<your_v3_api_key>` / `TMDB_V3_API_KEY=<your_v3_api_key>`
  2) Run:
     ```bash
     npm run generate:playlists
     ```
  3) Apply the generated SQL in `supabase/migrations/` via Supabase SQL editor or CLI.

### Upgrade guide
1) Pull latest
2) Apply migration `20250628101500_admin_featured_playlists_policies.sql`
3) (Optional) Generate and apply fresh featured playlists seed (`npm run generate:playlists`)
4) Restart dev server: `npm run dev`

### Files touched (not exhaustive)
- Playlists generator: `scripts/build_featured_playlists.cjs`, `package.json` (scripts), `devDependencies` (`dotenv`)
- Admin pages/routes: `src/pages/EditPlaylistPage.tsx`, `src/App.tsx`, `src/pages/PlaylistPage.tsx`
- Add movies fix: `src/pages/AddMoviesToPlaylistPage.tsx`, `src/hooks/usePlaylists.ts`
- UI/UX: `src/components/HeroCarousel.tsx`, `src/components/MovieRow.tsx`, `src/index.css`, `src/pages/HomePage.tsx`
- Auth: `src/hooks/useAuth.ts`
- RLS: `supabase/migrations/20250628101500_admin_featured_playlists_policies.sql`


